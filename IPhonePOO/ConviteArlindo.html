<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convite do Arlindo 2025</title>
</head>

<style>
    body {
        margin: 0;
        font-family: sans-serif;
    }

    #main {
        position: relative;
    }

    #background {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: auto;
        z-index: 0;
    }

    #overlay {
        display: flex;
        align-items: center;
        justify-content: center;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        z-index: 1;
    }

    #local,
    #whatsapp,
    #counter {
        position: absolute;
        text-decoration: none;
    }

    #counter {
        color: white;
        font-weight: bold;
        font-size: 3.1rem;
        display: flex;
        flex-direction: row;
        text-align: center;
        margin: 0;
    }

    #days,
    #hours,
    #mins,
    #secs,
    p {
        margin: 0;
        white-space: pre;
    }

    .text {
        font-size: 1rem;
    }

    .confete-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 9999;
        overflow: hidden;
    }

    .confete {
        position: absolute;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        opacity: 1;
    }

    @keyframes explodir {
        to {
            transform: translate(var(--dx), var(--dy)) rotate(720deg);
            opacity: 0;
        }
    }

    @keyframes cair {
        0% {
            transform: translateY(0);
            opacity: 1;
        }

        100% {
            transform: translateY(100vh);
            opacity: 0;
        }
    }
</style>

<body>
    <div id="main">
        <img id="background"
            src="https://raw.githubusercontent.com/arimateia286/DeusiCalc/refs/heads/gh-pages/assets/img/favicons/convite-arlindo.png">
        <div id="overlay">
            <a id="local" href="https://maps.app.goo.gl/2vpCWDXVmmqfY1CL9"></a>
            <a id="whatsapp"
                href="https://api.whatsapp.com/send?phone=5585974010677&text=Oi%2C%20Arlindo!%20Estou%20confirmando%20minha%20presen%C3%A7a%20em%20seu%20anivers%C3%A1rio!%20%F0%9F%A5%B3%F0%9F%A5%B3%F0%9F%A5%B3"></a>
            <div id="counter">
                <div id="days"></div>
                <div id="hours"></div>:
                <div id="mins"></div>:
                <div id="secs"></div>
            </div>
        </div>
        <div class="confete-container" id="confete-container"></div>
    </div>
</body>

<script>
    window.onload = () => {
        const get = (id) => { return document.getElementById(id); };

        const background = get("background");
        const backWidth = background.getBoundingClientRect().width,
            backHeight = background.getBoundingClientRect().height;
        const overlay = get("overlay");
        overlay.style.height = `${backHeight}px`;

        const numero = "5585991902218";

        const move = (id, y, w, h) => {
            const element = get(id);
            const rect = {
                y: `${y / 100 * backHeight}px`,
                w: `${w / 100 * backWidth}px`,
                h: `${h / 100 * backHeight}px`
            }
            element.style.top = rect.y;
            element.style.width = rect.w;
            element.style.height = rect.h;
            if (w == "auto") {
                element.style.width = "auto";
            }
            if (h == "auto") {
                element.style.heigut = "auto";
            }
        }

        move("local", 78.5, 75, 6);
        move("whatsapp", 89, 35, 8.5);
        move("counter", 55, "auto", "auto");
        //move("text", 62, "auto", "auto");

        let intervalo;

        const atualizarContador = () => {
            //const dataAlvo = new Date("2025-05-31T19:00:00");
            const dataAlvo = new Date();

            const agora = new Date();
            const diferenca = dataAlvo - agora;

            if (diferenca <= 0) {
                get("counter").innerHTML = `Tempo Esgotado<p class="text">Quem foi, foi, quem não foi, não vai mais</p>`;
                get("counter").style.flexDirection = "column";
                get("counter").style.fontSize = "2rem";
                if (intervalo) clearInterval(intervalo);
                return;
            }

            const segundos = Math.floor((diferenca / 1000) % 60);
            const minutos = Math.floor((diferenca / (1000 * 60)) % 60);
            const horas = Math.floor((diferenca / (1000 * 60 * 60)) % 24);
            const dias = Math.floor(diferenca / (1000 * 60 * 60 * 24));

            get("days").innerHTML = `<p>${String(dias).padStart(2, '0')} </p><p class="text">DIAS   </p>`;
            get("hours").innerHTML = `${String(horas).padStart(2, '0')}<p class="text">HRS</p>`;
            get("mins").innerHTML = `${String(minutos).padStart(2, '0')}<p class="text">MINS</p>`;
            get("secs").innerHTML = `${String(segundos).padStart(2, '0')}<p class="text">SEGS</p>`;
        };

        atualizarContador();
        intervalo = setInterval(atualizarContador, 1000);

        const cores = ['#00aaff', '#ff66cc'];
        const container = document.getElementById('confete-container');

        // Explosão do centro
        function explosaoConfetes(qtd = 250) {
            for (let i = 0; i < qtd; i++) {
                const confete = document.createElement('div');
                confete.className = 'confete';
                confete.style.backgroundColor = cores[Math.floor(Math.random() * cores.length)];
                confete.style.left = '50%';
                confete.style.top = '50%';
                confete.style.transform = 'translate(-50%, -50%)';

                // direção aleatória
                const angle = Math.random() * 2 * Math.PI;
                const distance = 100 + Math.random() * 200; // até 300px
                const dx = Math.cos(angle) * distance + 'px';
                const dy = Math.sin(angle) * distance + 'px';
                confete.style.setProperty('--dx', dx);
                confete.style.setProperty('--dy', dy);
                confete.style.animation = `explodir 1s ease-out forwards`;

                container.appendChild(confete);
                setTimeout(() => confete.remove(), 1200);
            }
        }

        // Confetes caindo de cima
        function criarConfeteCaindo() {
            const confete = document.createElement('div');
            confete.className = 'confete';
            confete.style.left = Math.random() * window.innerWidth + 'px';
            confete.style.top = '-10px';
            confete.style.backgroundColor = cores[Math.floor(Math.random() * cores.length)];
            confete.style.animation = `cair ${2 + Math.random() * 3}s linear forwards`;

            container.appendChild(confete);
            setTimeout(() => confete.remove(), 5000);
        }

        // Disparar tudo:
        explosaoConfetes(); // explode do meio

        // Após 1 segundo, começa a cair por 5 segundos
        setTimeout(() => {
            const intervalo = setInterval(criarConfeteCaindo, 50);
            setTimeout(() => clearInterval(intervalo), 5000);
        }, 1000);
    }
</script>

</html>